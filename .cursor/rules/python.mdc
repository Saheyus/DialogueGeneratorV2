---
description: Python (global) — conventions, qualité, Windows-first, migration web
globs: []
alwaysApply: true
---
- Conserver l’architecture existante (répertoires `core/`, `domain/`, `services/`, `ui/`, `models/`) et réutiliser les services plutôt que dupliquer la logique.
- Windows-first: utiliser `pathlib.Path`, encodage `utf-8`, éviter les hypothèses POSIX (chemins, commandes, signaux).
- Pour tout code Python modifié/ajouté: annotations de types complètes + docstrings PEP257 (fonctions, méthodes, classes). Ne pas supprimer les commentaires existants.
- Erreurs: messages utiles + logging contextualisé; pas de `except Exception` silencieux.
- Config/secrets: aucun secret en dur; passer par variables d’environnement et config existante (ex: `OPENAI_API_KEY`, `config/*.json`).

- Migration web en cours (cible):
  - Frontend (React/Vue/Svelte) ↔ API (REST/GraphQL) ↔ Backend Python (FastAPI/Flask) ↔ Services existants ↔ LLM/GDD/Storage
  - Priorité: isoler la logique dans des services importables; l’UI desktop devient un client (comme le frontend).

- Outils: avant d’inférer, localiser la source réelle (recherche sémantique + grep). Si une API “récente” est incertaine (Cursor rules, OpenAI SDK, Qt), valider via navigateur/web.


